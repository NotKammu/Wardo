<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Top Picks</title>

<style>
body {
  margin: 0;
  font-family: Georgia, serif;
  background-color: #0f1b17;
  color: white;
  padding: 40px;
}

h2 {
  font-size: 24px;
  margin-bottom: 20px;
}

.top-picks {
  display: flex;
  gap: 30px;
}

.card {
  background: linear-gradient(to bottom, #d0d0d0, #2a2a2a);
  width: 200px;
  height: 300px;
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  transition: transform 0.3s;
}

.card:hover {
  transform: scale(1.05);
}

.card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: 0.85;
}

.card-content {
  position: absolute;
  bottom: 0;
  width: 100%;
  background: rgba(0,0,0,0.6);
  padding: 8px;
  font-size: 13px;
}
</style>
</head>

<body>

<h2>Top Picks</h2>
<div class="top-picks" id="topPicksContainer"></div>

<script>
const container = document.getElementById("topPicksContainer");

fetch("http://127.0.0.1:5000/api/top-picks", {
  method: "POST",
  headers: { "Content-Type": "application/json" },
  body: JSON.stringify({
    occasion: "Casual",
    weather: "Summer",
    undertone: "Warm",
    use_weather: true,
    use_undertone: true
  })
})
.then(res => res.json())
.then(data => {

  if (!Array.isArray(data) || data.length === 0) {
    container.innerHTML = "<p>No recommendations found</p>";
    return;
  }

  data.forEach(item => {
    const card = document.createElement("div");
    card.className = "card";

    card.innerHTML = `
      <img src="${item.top_image}" alt="Outfit">

      <div class="card-content">
        <div><b>Top:</b> ${item.topwear}</div>
        <div><b>Bottom:</b> ${item.bottomwear}</div>
        <div><b>Match:</b> ${item.score}</div>
      </div>
    `;

    container.appendChild(card);
  });
})
.catch(err => {
  console.error(err);
  container.innerHTML = "<p>Error loading recommendations</p>";
});
</script>

</body>
</html>